template(name='incidents')
    .ui.container
        .ui.stackable.divided.grid
            .twelve.wide.column
                .ui.relaxed.divided.items
                    each incidents
                        +incident_item
            .four.wide.column
                #add_incident.ui.compact.basic.fluid.button
                    i.green.plus.corner.icon
                    |Add Incident


template(name='my_incidents')
    .ui.fluid.card
        .content
            .ui.header My Docs
            .ui.divided.list
                each my_incidents
                    .item 
                        a(href="/view/#{_id}") #{title}


template(name='incident')
    .ui.fluid.card
        .ui.centered.image
            a(href="/view/#{_id}")
                img(src="{{c.url image_id  height=300 crop='fill' gravity='face' }}")
        .content
            h1.ui.header
                a(href="/view/#{_id}") #{title}
            if publish_date
                .meta
                    | Published #{publish_when}
            .description
                |{{nl2br body}}
        .content
            each tags
                .ui.compact.button.incident_tag(class=tag_class) #{this}
            .edit_incident.ui.primary.basic.right.floated.button
                i.pencil.icon
                |Edit Incident    
            
            
template(name='incident_item')
    .ui.item
        a.image(href="/view/#{_id}")
            img.ui.rounded.image(src="{{c.url image_id  width=175 height=175 crop='fill' gravity='face' }}")
        .content
            a.header(href="/view/#{_id}") #{title}
            .meta Created by #{createdBy}
            .meta Type #{type}
            .meta Number #{number}
            .description
                .ui.header Body
                |!{body}
            a.ui.button(href="/view/#{_id}") 
                |View
                i.chevron.right.icon
                
                
template(name='edit_incident')
    with doc
        .ui.center.aligned.header Edit Incident
        .ui.grid
            .twelve.wide.column
                .ui.form
                    +edit_title  
                    +edit_number
            .four.wide.column
                a.ui.button(href="/view/#{_id}") Save Incident
        
        
        
template(name='view_incident')
    with incident
        .ui.container.divided.grid
            .row
                a.ui.top.left.attached.button(href="/incidents")
                    i.arrow.left.icon
                    |Incidents
            .centered.row
                h1.ui.center.aligned.header #{title}
                if image_id
                    img.ui.centered.image(src="{{c.url image_id height=500 width=800 background='white' crop='lpad'}}")
            .row
                .ten.wide.column
                    .ui.header Type: #{type}
                    .ui.header Number: #{number}
                    if publish_date
                        h4.ui.header Published #{publish_when}
                    .ui.basic.segment
                        |!{description}
                    if tags
                        .ui.basic.segment
                            each tags
                                .ui.basic.label #{this}
                    // +comments
                .five.wide.column
                    // +user_card
                    .edit_incident.ui.button
                        i.edit.icon
                        |Edit Incident