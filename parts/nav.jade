template(name='nav')
    .ui.inverted.top.attached.labeled.icon.menu
        .mobile.only.ui.dropdown.icon.link.item
            i.th.large.icon
            .ui.menu
                a.item(href='/people' class="{{isActivePath '/people'}}")
                    i.users.icon
                    | users
                a.item(href='/incidents' class="{{isActivePath '/incidents'}}")
                    i.clipboard.icon
                    | incidents
                a.item(href='/offices' class="{{isActivePath '/offices'}}")
                    i.building.icon
                    | offices
        a.header.item(href='/' class="{{isActivePath '/'}}") 
            i.line.chart.icon
            | home
        a.mobile.hidden.item(href='/people' class="{{isActivePath '/people'}}")
            i.users.icon
            |  users
        a.mobile.hidden.item(href='/incidents' class="{{isActivePath '/incidents'}}")
            i.clipboard.icon
            |  incidents
        a.mobile.hidden.item(href='/offices' class="{{isActivePath '/offices'}}")
            i.building.icon
            |  offices
        a.mobile.hidden.item(href='/services' class="{{isActivePath '/services'}}")
            i.shipping.fast.icon
            | services
        .right.menu
            a.mobile.hidden.item(href='/admin' class="{{isActivePath '/admin'}}")
                i.shield.alternate.icon
                |admin
            // .ui.simple.dropdown.icon.item
            //     i.bell.icon
            //     .menu
            //         if notifications
            //             each notifications
            //                 .item #{text}
            //         else
            //             | No Notifications
            if currentUser
                a.ui.dropdown.item(href="/account/profile/edit/#{currentUser._id}" class="{{isActivePath '/account/profile/edit/#{currentUser._id}'}}")
                    if currentUser.profile.image_id
                        img.ui.avatar.spaced.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
                    else
                        i.user.icon
                    |#{currentUser.username}
                    // if currentUser.name
                    //     .mobile.hidden #{currentUser.name}
                    // else
                    //     | Profile
                    .ui.inverted.menu
                        a.item(href="/notifications")
                            i.bell.icon
                            | notifications
                        a.item(href='/mail')
                            i.envelope.icon
                            | mail
                        a.item(href="/account/profile/edit/#{currentUser._id}" class="{{isActivePath '/account/profile/edit/#{currentUser._id}'}}")
                            i.user.icon
                            | profile
                        a.item(href='/account/settings' class="{{isActivePath '/account/settings'}}") 
                            i.cog.icon
                            | settings
                        .divider
                        a#logout.ui.item(href='#') 
                            | sign out
                            
            else
                a.ui.item(href='/sign-in') 
                    i.right.chevron.icon
                    | sign in
