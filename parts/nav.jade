template(name='nav')
    .ui.inverted.fixed.menu
        // .mobile.only.ui.dropdown.icon.link.item
        //     i.th.large.icon
        //     .ui.menu
        //         a.icon.item(href='/people' class="{{isActivePath '/people'}}")
        //             i.large.users.icon
        //             // | Users
        //         a.icon.item(href='/incidents' class="{{isActivePath '/incidents'}}")
        //             i.large.clipboard.icon
        //             // | Incidents
        //         a.icon.item(href='/offices' class="{{isActivePath '/offices'}}")
        //             i.large.building.icon
        //             // | Offices
        //         a.icon.item(href='/services' class="{{isActivePath '/services'}}")
        //             i.large.shipping.fast.icon
        //             // | Services
        a.toggle_sidebar.icon.item 
            i.bars.large.icon
        a.header.icon.item(href='/' class="{{isActivePath '/'}}" data-content='Home')
            i.large.home.icon
            // | Home
        a.mobile.hidden.item(href='/people' class="{{isActivePath '/people'}}" data-content='Users')
            i.large.users.icon
            | Users
        a.mobile.hidden.item(href='/incidents' class="{{isActivePath '/incidents'}}" data-content='Incidents')
            i.large.clipboard.icon
            | Incidents
        a.mobile.hidden.item(href='/offices' class="{{isActivePath '/offices'}}" data-content='Offices')
            i.large.building.icon
            | Offices
        a.mobile.hidden.item(href='/services' class="{{isActivePath '/services'}}" data-content='Services')
            i.large.shipping.fast.icon
            | Services
        .right.menu
            a.mobile.hidden.item(href='/admin/tasks' class="{{isActivePath '/admin/tasks'}}")
                i.shield.alternate.icon
                | Admin
            // .icon.item
            //     i.bell.icon
            .icon.item
                i.envelope.icon
            .ui.simple.dropdown.icon.item
                i.bell.icon
                .menu
                    .item No Notifications
            if currentUser
                a.ui.dropdown.item(href="/account/profile/edit/#{currentUser._id}" class="{{isActivePath '/account/profile/edit/#{currentUser._id}'}}")
                    if currentUser.profile.image_id
                        img.ui.avatar.spaced.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
                    else
                        i.user.icon
                    |#{currentUser.username}
                    // if currentUser.name
                    //     .mobile.hidden #{currentUser.name}
                    // else
                    //     | Profile
                    .ui.inverted.menu
                        .disabled.item
                            i.bell.icon
                            | Notifications
                        .disabled.item
                            i.envelope.icon
                            | Mail
                        a.item(href="/account/profile/edit/#{currentUser._id}" class="{{isActivePath '/account/profile/edit/#{currentUser._id}'}}")
                            i.user.icon
                            | Profile
                        a.item(href='/account/settings' class="{{isActivePath '/account/settings'}}") 
                            i.cog.icon
                            | Settings
                        .divider
                        a#logout.ui.item(href='#') 
                            | Sign Out
                            
            else
                a.ui.item(href='/sign-in') 
                    i.right.chevron.icon
                    | Sign In
