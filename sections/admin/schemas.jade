template(name='schemas')
    .ui.stackable.padded.grid
        .row 
            .three.wide.column
            .ten.wide.column
                h1.ui.center.aligned.header 
                    i.database.icon
                    | Schemas
            .three.wide.column
                +add_button type='schema'
        .row 
            .three.wide.column
                +tag_facet
            .ten.wide.column
                .ui.centered.stackable.cards
                    each schemas
                        +schema_card

template(name='schema_card')
    .ui.card
        .content
            a.grey.header(href="/view/#{_id}")
                |#{name} 
        .content
            |!{html}
            each tags
                .ui.label #{this}
        .content
            +edit_button
            +view_button
        
        
        
template(name='schema_edit')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.column
                #delete.ui.icon.button
                    i.trash.icon
            .ten.wide.column
                h1.ui.center.aligned.grey.header Edit Schema #{name}
            .three.wide.column
                +save_button
        .twelve.wide.column
            .ui.form
                +edit_text_field key='name' label='Schema Name'
                +edit_array_field key='tags'
                // +reference_type_multiple key='field_ids' label='Fields' type='field'
                #add_field.ui.button
                    i.plus.icon
                    | field
                .ui.vertical.segments
                    each fields
                        +field_edit
                    
                    
template(name='field_edit')
    .ui.segment
        .ui.form
            .field
                .ui.labeled.fluid.input
                    .ui.label Title
                    input.field_title(type='text' value=title)
            .field
                .ui.labeled.fluid.input
                    .ui.label Key
                    input.field_key(type='text' value=key)

        // +edit_text_field key='key' label='Slug (lowercase title)'
        // +edit_text_field key='type' label='Type'
        +select_field_type key='field_type' value='date' label='Date'
        +select_field_type key='field_type' value='text' label='Text'
        +select_field_type key='field_type' value='multiple_reference' label='Multiple Reference'
        +select_field_type key='field_type' value='single_reference' label='Single Reference'
        +select_field_type key='field_type' value='number' label='Number'
        +select_field_type key='field_type' value='address' label='Address'
        .remove_field.ui.icon.large.button
            i.remove.icon


template(name='select_field_type')
    .select_field_type.ui.button(class=select_field_type_button_class) #{label}

        
template(name='schema_view')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.column
                +link_button link='/schemas' icon='chevron left' label='schemas'
            .ten.wide.column
                h1.ui.center.aligned.grey.header schema: #{name}
            .three.wide.column
                +edit_button
        .row
            .eight.wide.column
                .ui.header Name: #{name}
                .ui.header Description: !{html}
                +comments
                
                
template(name='schema_selector')
    each user_schemas
        .toggle_schema.ui.button #{name}            