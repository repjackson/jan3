template(name='event_view')
    .ui.padded.stackable.grid
        .centered.row
            .three.wide.center.aligned.column
                +link_button link='/p/feed' label='Feed' icon='rss'
            .ten.wide.column
                h1.ui.header
                    +iconlarge name='rss'
                    | Event View
        .centered.row
            .ten.wide.column
                .event
                    .label
                        img.ui.avatar.image(src="{{c.url author.image_id width=100 height=100 gravity='face' crop='fill'}}")
                    .content
                        .summary
                            a.user #{author.username}
                            |#{action} #{text}
                            a(href="/v/#{parent._id}") #{parent.title}
                            .date #{when}
                        .meta
                            +mark_read_link
                            if is_dev
                                i.remove_event.remove.link.icon


template(name='users_feed')
    h1.ui.header
        +icon name='rss'
        | Users Feed
    .ui.comments
        each feed_events
            +doc_history_event


template(name='users_feed_event')
    .event
        .label
            img.ui.avatar.image(src="{{c.url author.image_id width=100 height=100 gravity='face' crop='fill'}}")
        .content
            .summary
                a.user #{author.username}
                |#{action} #{text}
                a(href="/v/#{parent._id}") #{parent.title}
                .date #{when}
            .meta
                +mark_read_link
                if is_dev
                    i.remove_event.remove.link.icon



template(name='event')
    // .event
    //     .label
    //         img.ui.avatar.image(src="{{c.url author.image_id width=100 height=100 gravity='face' crop='fill'}}")
    //     .content
    //         .summary
    //             a.user #{author.username}
    //             |#{action} #{text}
    //             a(href="/v/#{parent._id}") #{parent.title}
    //             .date #{when}
    //         .meta
    //             // +mark_read_link
    .comment
        .avatar
            // img.ui.avatar.image(src="{{c.url author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
            +icon name=event_icon_name
        .content
            if show_author
                a.user #{author.username}
            .metadata
                .date {{ long_format timestamp }}
            .text #{action} #{text}
            .actions
                if is_dev
                    i.remove_event.remove.link.icon


template(name='full_doc_history')
    .ui.secondary.segment
        .ui.header
            +icon name='activity-feed'
            |Events
            // if is_admin
            //     small#clear_events (x)
        .ui.comments
            each doc_history_events
                +doc_history_event

template(name='doc_history_event')
    .comment
        .avatar
            // img.ui.avatar.image(src="{{c.url author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
            if is_escalation
                +level_icon
            else if event_type_doc.icon
                +icon name=event_type_doc.icon
            else
                +icon name='commit-git'
        .content
            if show_author
                a.user #{author.username}
            .text #{action} #{text}
            .metadata
                // .date {{ long_format timestamp }}
                .date(title="{{ long_format timestamp }}") #{when}
                if editing_mode
                    .rating(title='Event Type') #{event_type}
                    .id #{parent_id}
                // i.building.icon(title='Office')
                // i.money.icon(title='Customer')
                // i.user.icon(title='Author')
            .actions
                if editing_mode
                    i.remove_event.remove.link.icon



template(name='small_doc_history')
    // .ui.header History
    .ui.feed
        each doc_history_events
            +small_history_event

template(name='small_history_event')
    .event
        .content
            .extra.text
                |#{action} #{text}
            .summary
                .date {{long_format timestamp}}





template(name='feed')
    .ui.feed
        each feed_events
            +feed_event

template(name='feed_event')
    .event
        .label
            if icon
                i.icon(class=event_type.icon)
        .content
            .summary
                |#{text} #{action} #{body}
                a.user #{author.username}
                .date #{when}
            .meta
                a.like Office
                a.like Ticket
                a.like Customer