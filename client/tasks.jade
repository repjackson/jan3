template(name='tasks')
    .ui.stackable.padded.grid
        .middle.aligned.row 
            .three.wide.center.aligned.column
            .ten.wide.column
                h1.ui.center.aligned.header 
                    +icon name='realtime-protection'
                    | Tasks
            .three.wide.center.aligned.column
                +add_button type='task'
        .row 
            .three.wide.column
                .ui.header Total
                    +view_stat doc_type='task' stat_type='total' 
                .ui.header Complete #{complete_task_count}
                .ui.header Incomplete #{incomplete_task_count}
                .ui.indicating.progress
                    .bar
                    .label Completion
            .thirteen.wide.column
                .ui.divided.cards
                    each tasks
                        +task_card

template(name='task_card')
    .ui.card
        .content
            .header
                a(href="/view/#{_id}")
                    if complete
                        i.green.checkmark.icon
                    |#{title} 
            .content
                |by 
                +author_info
                div
                |#{when} {{ reg_format timestamp }}
            .extra.content
                +edit_button
                +view_button
        
        
        
template(name='task_edit')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.center.aligned.column
                #delete.ui.icon.button
                    i.trash.icon
            .ten.wide.column
                h1.ui.center.aligned.grey.header Edit Task
            .three.wide.center.aligned.column
                +save_button
        .eight.wide.column
            .ui.form
                +edit_text_field key='title' label='title'
                +edit_textarea label='Details' key='incident_details' icon='view-details'
        
        
template(name='task_view')
    .ui.padded.stackable.centered.grid
        .centered.middle.aligned.row
            .three.wide.center.aligned.column
                a.ui.button(href="/tasks")
                    i.up.chevron.icon
                    | Tasks
            .ten.wide.column
                h1.ui.center.aligned.grey.header View Task
            .three.wide.center.aligned.column
                +edit_button
        .row
            .twelve.wide.column
                .ui.header Title: #{title}
                +notify_button
                +multiple_user_select key='assigned_to' label='Assigned To' icon='user-shield'
