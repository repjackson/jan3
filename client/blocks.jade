template(name='author_info')
    with author
        if profile.image_id
            img.ui.avatar.spaced.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
        |&nbsp;
        a(href="/user/#{username}") #{username} 
        // +staus_indicator
    // .ui.sub.header #{when}


template(name='list_item')
    .item
        i.icon(class=icon title=key)
        .content
            .description 
                |#{label}
                strong #{key_value}


template(name='toggle_boolean')
    .field
        if is_on
            #turn_off.ui.button #{yes_label}
        else
            #turn_on.ui.button #{no_label}

template(name='save_button')
    a.ui.large.icon.button(href="/view/#{_id}") 
        i.checkmark.icon
        // | Save
        
template(name='edit_button')
    a.ui.icon.button(href="/edit/#{_id}" title='Edit') 
        // +officeicon name='pencil'
        i.pencil.icon
        // | Edit

template(name='view_button')
    a(href="/view/#{_id}" title='View Details') 
        // +avatar_sprite name='chevron-right'
        +officeicon name='circled-chevron-right'
        // i.right.chevron.icon
        
template(name='view_user_button')
    a(href="/user/#{username}" title="View #{username}") 
        // +avatar_sprite name='chevron-right'
        +officeicon name='circled-chevron-right'
        // i.right.chevron.icon
        
template(name='add_button')
    #add(title='Add')
        // i.plus.icon
        +officeicon name='plus'

template(name='reference_type_single')
    .ui.form
        .field
            label #{label}
            .ui.left.icon.input
                i.search.icon
                +inputAutocomplete settings=settings id="search" class="" autocomplete="off" placeholder='search...'

template(name='reference_type_multiple')
    .ui.form
        .field
            label #{label}
            .ui.left.icon.input
                i.search.icon
                +inputAutocomplete settings=settings id="search" class="" autocomplete="off" placeholder="add..."



template(name="office_result")
    .item #{office_name} (#{jan_office_id})

template(name="customer_result")
    .item #{first_name} #{last_name}


template(name='set_view_mode')
    #set_view_mode.ui.icon.button(title=label class=view_mode_button_class)
        i.icon(class=icon)
            
            
template(name='set_session_button')
    .set_session_filter.ui.button(class=filter_class)
        strong #{label}
        
template(name='set_session_item')
    a.set_session_filter.item 
        |#{label}
        
        
        
template(name='edit_image_field')
    .ui.dividing.header Image
    if image_id
        .ui.image
            img(src="{{c.url image_id }}")
            a#remove_photo.ui.top.left.attached.link.label remove
            // .ui.bottom.right.attached.label Image Id: #{image_id}
    else
        input(type='file' name='upload_picture' accept='image/*')
    // if isInRole 'admin'
    //     .field
    //         label or Choose Cloudinary Image Id
    //         input#input_image_id(type='text')
    

template(name='complete')            
    .field
        label completed
        #mark_complete.ui.button(class=complete_class) yes 
        #mark_incomplete.ui.button(class=incomplete_class) no 


template(name='toggle_key')
    .toggle_key.ui.button(class=toggle_key_button_class) #{label}


template(name='parent_segment')
    .ui.secondary.segment
        .ui.header Parent Doc
        with parent
            +view_array_field key='tags'
            .large130 #{text}
            // +author_info
            // |#{when}
        +view_button

template(name='parent_link')
    with parent
        a.ui.button(href="/view/#{_id}") 
            i.chevron.up.icon
            if image_url
                img.ui.medium.centered.image(src=image_url)
            if icon
                i.icon(class=icon)
            |#{text}
                    



template(name='view_full_button')
    a.floated.right(href="/view/#{_id}")
        // i.right.chevron.link.icon
        | View
                        
template(name='toggle_follow')
    if currentUser
        if is_following
            #remove_friend.ui.button
                i.minus.icon
                | Unfollow
        else
            #add_friend.ui.button
                i.plus.icon
                | Follow


// template(name='bookmark_button')
//     if bookmarked
//         .ui.icon.button
//             i.bookmark.icon
//     else
//         .ui.icon.primary.button
//             i.bookmark.icon
            
            
template(name='associated_incidents')
    .ui.secondary.segment
        .ui.header 
            i.exclamation.circle.icon
            | Incidents
        .ui.list
            each incidents
                .item ##{incident_number} #{when}
        
template(name='incidents_by_type')
    .ui.secondary.segment
        .ui.header 
            i.exclamation.circle.icon
            | Incidents
        .ui.list
            each typed_incidents
                .item
                    img.ui.avatar.image(src="{{c.url author.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
                    .content
                        a.header(href="/view/#{_id}") ##{incident_number} 
                        .description
                            |#{when}
        
            
            
            
            
template(name='associated_users')
    .ui.list
        each associated_users
            .item
                // .image
                //     img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                .content
                    .header
                        |#{profile.first_name} #{profile.last_name}
                    .description
                        | @#{username}
            
            
          
template(name='multiple_user_select')
    .ui.dividing.header #{label}
    .ui.form
        .field
            .ui.icon.transparent.input
                i.search.icon
                +inputAutocomplete settings=settings id="search" class="ui list" autocomplete="off" placeholder="Select Users..."
        .field
            .ui.list
                each user_array_users
                    .item
                        .right.floated.content
                            i.pull_user.remove.red.link.icon
                        .image
                            img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                        .content
                            .header
                                |#{profile.first_name} #{profile.last_name}
                            .description
                                | @#{username}
          
template(name='many_doc_select')
    .ui.dividing.header #{label}
    .ui.form
        .field
            .ui.left.icon.input
                i.search.icon
                +inputAutocomplete settings=settings id="search" class="ui list" autocomplete="off"
        .field
            .ui.list
                each doc_array_docs
                    .item
                        .right.floated.content
                            i.pull_user.remove.red.link.icon
                        .content
                            .header #{title} #{text} #{key} #{cust_name}
          
template(name='single_doc_select')
    .ui.dividing.header #{label}
    unless selected_doc
        .ui.form
            .field
                .ui.icon.transparent.input
                    i.handshake.icon
                    +inputAutocomplete settings=settings id="search" class="ui list" autocomplete="off" placeholder='Customer Name...'
    with selected_doc
        .ui.fluid.card
            .content
                .header 
                    |#{cust_name}
                    .right.floated
                        i.remove_doc.remove.red.link.icon
            .content
                .ui.list
                    .item JPID: #{jpid}
                    .item Tel: #{telephone}
                    .item Contact Person: #{customer_contact_person}
                    .item Contact Email: #{customer_contact_email}
                    .item Franchisee: #{franchisee}
                    .item Master Licensee: #{master_licensee}
          
template(name='single_doc_view')
    .ui.dividing.header #{label}
    with selected_doc
        .ui.fluid.card
            .content
                .header 
                    |#{cust_name}
            .content
                .ui.list
                    .item JPID: #{jpid}
                    .item Tel: #{telephone}
                    .item Contact Person: #{customer_contact_person}
                    .item Contact Email: #{customer_contact_email}
                    .item Franchisee: #{franchisee}
                    .item Master Licensee: #{master_licensee}
          
template(name='view_multiple_user')
    .ui.form
        .field
            label #{label}
        .field
            .ui.list
                each user_array_users
                    .item
                        .image
                            img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                        .content
                            .header
                                |#{profile.first_name} #{profile.last_name}
                            .description
                                | @#{username}
          
          
            
template(name='call_phone_button')
    a.ui.fluid.button(href="tel:#{phone_number}") 
        i.phone.icon
        | Call #{phone_number}
            
            
            
template(name='link_button')    
    a(href=link title=label)
        // i.icon(class=icon)
        +officeicon name=icon
        // strong #{label}

template(name='edit_author')
    .ui.header Edit Author
    with author
        img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
        |#{username}
    .ui.input
        +inputAutocomplete settings=author_edit_settings id="author_select" class="" autocomplete="off" placeholder='Lookup...'
                    


template(name='delete_button')
    #delete.ui.red.icon.button(title='delete')
        i.trash.icon
        +mini_sprite name='trash'
        
        
template(name='edit_link')
    .field
        label link (include http://)
        .ui.left.icon.input
            i.linkify.icon
            input#link(type='text' value=url)


template(name='publish_button')
    .field
        label Status
        if published
            #unpublish.ui.green.button
                |Published
        else
            #publish.ui.button
                |Private


template(name='call_method')
    .call_method.ui.button call #{name}
    
    
template(name='small_comment_count')
    .ui.mini.statistic
        .value
            i.comment.icon
            |#{comment_count}
        // .label Comments

    
    
template(name='html_create')
    if doc
        with doc
            if is_editing
                .ui.labeled.fluid.input
                    .ui.label select staff
                    input#staff(type='text' value=staff)
            else
                div(class=doc_classes)
                    |#{staff}
            // if isInRole 'admin'
            +session_edit_icon
    else
        // if isInRole 'admin'
        .ui.header no coc found
        .create_doc.ui.button
            i.plus.icon
            |create html with #{template_tags}
    
template(name='office_map')
    .ui.secondary.segment
        .ui.header
            i.map.marker.icon
            | #{geocode.formatted_address}
        +google_places_input
        #map
        
template(name='google_places_input')
    .ui.fluid.icon.input
        i.search.icon
        input#google_places_field(type='text' placeholder='change address...')    
        
        
        
template(name='mini_inline_sprite')
    img.ui.mini.inline.spaced.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='mini_sprite')
    img.ui.mini.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='tiny_sprite')
    img.ui.tiny.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='avatar_sprite')
    img.ui.avatar.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='small_sprite')
    img.ui.small.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='medium_sprite')
    img.ui.medium.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)
template(name='dots')
    img(src="https://png.icons8.com/hide/#{name}/100/000000" class=classes title=tooltip)
template(name='icon')
    img.ui.image(src="https://png.icons8.com/color/100/000000/#{name}.png" class=classes title=tooltip)

template(name='dusk_icon')
    img.ui.image(src="https://png.icons8.com/dusk/50/000000/#{name}.png")

template(name='officeicon')
    img.ui.image(src="https://png.icons8.com/office/40/000000/#{name}.png")
template(name='officeiconlarge')
    img.ui.image(src="https://png.icons8.com/office/100/000000/#{name}.png")
template(name='officeiconsmall')
    img.ui.image(src="https://png.icons8.com/office/30/000000/#{name}.png")

template(name='user_pill')
    .item
        .content
            .header
                img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                |#{name}
            // .description
            //     each five_tags
            //         .ui.basic.small.label #{this}


template(name='full_doc_history')
    // .ui.header History
    .ui.feed
        each doc_history_events
            .event
                .label
                    img.ui.avatar.image(src="{{c.url author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                .content
                    .summary
                        a.user #{author.username}
                        |#{action} #{text}
                        .date #{when}

template(name='small_doc_history')
    // .ui.header History
    .ui.feed
        each doc_history_events
            .event
                .label
                    img.ui.avatar.image(src="{{c.url author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                .content
                    .summary
                        a.user #{author.username}
                        |#{action} #{text}
                        .date #{when}


template(name='view_telephone_field')
    div
        a(href="tel:#{TELEPHONE}")
            i.phone.link.icon
        strong #{TELEPHONE} 
            
            
// template(name='call_phone_button')
//     a.ui.fluid.button(href="tel:#{phone_number}") 
//         i.phone.icon
//         | Call #{phone_number}
            
            
template(name='user_result')
    .ui.item
        .image
        .content
            .header
                img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                |#{profile.first_name} #{profile.last_name}
                small @#{username}


template(name='doc_result')
    with doc_context
        .ui.item
            .content
                .header #{title} #{text} #{cust_name}
                
                
                
template(name='my_customer_account')
    .ui.secondary.segment
        .ui.header 
            +officeicon name='customer-support'
            |My Customer Account
        if currentUser.users_customer
            with currentUser.users_customer
                .content
                    a.ui.header(href="/view/#{_id}") #{ev.CUST_NAME}
                .content
                    .ui.list
                        .item ##{ev.ID}
                        .item #{ev.CUST_CONT_PERSON}
                        .item #{ev.CUST_CONTACT_EMAIL}
                        .item #{ev.TELEPHONE}
                        .item #{ev.ADDR_STREET}
                        .item #{ev.ADDR_STREET_2}
                        .item #{ev.ADDR_CITY} #{ev.ADDR_STATE}
                // .content
                //     div Franchisee
                //         strong #{ev.FRANCHISEE}
                //     div Office
                //         strong #{ev.MASTER_LICENSEE}

template(name='user_office_card')
    .ui.secondary.segment
        .ui.header 
            +officeicon name='link-company-parent'
            |My Office
        if currentUser.users_customer.parent_franchisee.parent_office
            with currentUser.users_customer.parent_franchisee.parent_office
                .content
                    a.header(href="/view/#{_id}") #{office_name}
                .content
                    | #{address}
                .content
                    a(href="tel:#{telephone}") #{telephone}
        
template(name='user_franchise_card')
    .ui.secondary.segment
        .ui.header 
            +officeicon name='collaborator-female'
            |My Franchisee
        if currentUser.users_customer.parent_franchisee
            with currentUser.users_customer.parent_franchisee
                .content
                    a.header(href="/view/#{_id}" title='View Franchisee') #{franchisee}
                .content
                    .ui.list
                        .item(title='Short Name') #{ev.FRANCH_NAME}
                        .item(title='Call Number')
                            a(href="tel:#{ev.TELE_CELL}") #{ev.TELE_CELL}
                        .item #{franchisee_email}
                    
        