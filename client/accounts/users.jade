template(name='users') 
    .ui.padded.stackable.middle.aligned.middle.aligned.grid
        .row
            .sixteen.wide.column
                +table_header stat_type='total'
        .row
            .sixteen.wide.column 
                table.ui.striped.fixed.table
                    thead
                        th.one.wide
                        +sort_column_header key='username' label='Username'
                        +sort_column_header key='profile.first_name' label='First Name'
                        +sort_column_header key='profile.last_name' label='Last Name'
                        +sort_column_header key='profile.title' label='Title'
                        +sort_column_header key='roles' label='Role(s)'
                        +sort_column_header key='email' label='Contact'
                        +sort_column_header key='profile.office_name' label='Office'
                    tbody
                        each all_users
                            tr
                                td
                                    if profile.image_id
                                        img.ui.avatar.spaced.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                                .ui.popup
                                    img.ui.small.image(src="{{c.url profile.image_id height=500 width=500 crop='fill' gravity='face'}}")
                                td.selectable
                                    a(href="/user/#{username}" title="View #{username} Profile") 
                                        |#{username}
                                td.selectable(title="View #{username} Profile") 
                                    a(href="/user/#{username}") 
                                        |#{profile.first_name} 
                                td.selectable(title='View Profile')
                                    a(href="/user/#{username}") 
                                        |#{profile.last_name}
                                td #{profile.title} #{ev.JOB_TITLE}
                                td 
                                    each roles
                                        .ui.basic.small.label #{this}
                                td 
                                    div #{email}
                                    div #{ev.WORK_TELEPHONE}
                                td #{profile.office_name}
                    +table_footer columns='8' stat_type='total'