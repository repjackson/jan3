head
    title Jan-Pro Customer Portal
    meta(name='viewport', content='user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
        integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="")
    // script(type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBtrEdNt4fb8jtrq8Iz4_apS3zXZnbAqq4&libraries=places")
    link(href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet")

    script(src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
        integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin="")
    script(src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js')
    link(href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet')


template(name='layout')
    .context.example
        +nav
        // .ui.top.attached.demo.menu
        //     a.item
        //         i.sidebar.icon
        //         |     Menu
        .ui.bottom.attached.basic.segment.pushable
            // +top_sidebar
            +left_sidebar
            +right_sidebar
            .pusher
                #main_area
                    .ui.basic.fluid.segment
                        +Template.dynamic template=cloud
                        +Template.dynamic template=sub_nav
                        +Template.dynamic template=sub_sub_nav
                        +Template.dynamic template=main
            // +bottom_sidebar
    +footer
        // +jsonView json=doc


template(name='not_found')
    .ui.text.container
        .ui.center.aligned.header 
            +icon name='broken-link'
            |Not Found


template(name='left_sidebar')
    .ui.left.vertical.very.thin.sidebar.inverted.large.icon.menu
        // a.header.toggle_left_sidebar.item(href='/' class="{{isActivePath '/'}}") 
        //     i.home.large.icon
        //     |Jan-Pro
        a.toggle_left_sidebar.item(href='/users' class="{{isActivePath '/users'}}" data-position="right center" data-content='Users')
            i.large.users.icon
            // | Users
        a.toggle_left_sidebar.item(href='/incidents' class="{{isActivePath '/incidents'}}" data-position="right center" data-content='Incidents')
            i.large.clipboard.icon
            // | Incidents
        a.toggle_left_sidebar.item(href='/offices' class="{{isActivePath '/offices'}}" data-position="right center" data-content='Offices')
            i.large.building.icon
            // | Offices
        a.toggle_left_sidebar.item(href='/offices' class="{{isActivePath '/offices'}}" data-position="right center" data-content='Schedule')
            i.large.calendar.icon
            // | Schedule
        a.toggle_left_sidebar.item(href='/services' class="{{isActivePath '/services'}}" data-position="right center" data-content='Services')
            i.clock.icon
            // +tiny_sprite name='duster'
            // | Services
        .ui.divider
        if currentUser
            // a.icon.item(href='/dashboard' class="{{isActivePath '/dashboard'}}" data-position="right center" data-content='Charts')
            //     i.line.chart.icon
            // .ui.simple.dropdown.icon.item
            //     i.alarm.icon
            //     .menu
            //         each alerts
            //             .item #{text}
            // a.icon.item(href='/messages' class="{{isActivePath '/messages'}}" data-position="right center" data-content='Charts')
            //     i.mail.icon
            // if isInRole 'admin'
            a.icon.toggle_sidebar.item(href='/admin/tasks' class="{{isActivePath '/admin/tasks'}}" data-position="right center" data-content='Admin')
                // i.large.icon
                +mini_sprite name='user-shield'
                // |Admin
            // a.toggle_sidebar.item(href="/profile/edit/#{currentUser._id}" class="{{isActivePath '/profile/edit/#{currentUser._id}'}}" data-position="right center" data-content='Charts')
            //     if currentUser.profile.first_name
            //         | #{currentUser.profile.first_name}
            //     else
            //         | #{currentUser.username}
            //     if currentUser.profile.image_id
            //         img.ui.avatar.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}" data-position="right center" data-content='Charts')
            //     else
            //         i.user.large.icon
            // a#logout.ui.toggle_sidebar.item(href='#') 
            //     i.large.icon
            //         +mini_sprite name='edit'
            //     | Sign Out
        else
            a.ui.toggle_sidebar.item(href='/sign-in') 
                i.large.icon
                    +mini_sprite name='enter'
                | Sign In


template(name='right_sidebar')
    .ui.right.inline.vertical.thin.sidebar.inverted.large.menu
        a.toggle_right_sidebar.header.item(href="/profile/edit/#{currentUser._id}" class="{{isActivePath '/profile/edit/#{currentUser._id}'}}")
            img.ui.avatar.spaced.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
            | Profile
        a.toggle_right_sidebar.item(href='/alerts')
            | Alerts
            i.large.icon
                +mini_sprite name='appointment-reminders'
        a.toggle_right_sidebar.item(href='/mail')
            i.large.icon
                +mini_sprite name='secured-letter'
            | Mail
        a.toggle_right_sidebar.item(href='/chat')
            i.large.icon
                +mini_sprite name='chat'
            | Chat
        a.toggle_right_sidebar.item(href='/bookmarks')
            i.large.icon
                +mini_sprite name='bookmark'
            | Bookmarks
        a.toggle_right_sidebar.item(href='/account/settings' class="{{isActivePath '/account/settings'}}") 
            i.large.icon
                +mini_sprite name='settings'
            | Settings
        .divider
        a.toggle_right_sidebar.item(href='/admin' class="{{isActivePath '/admin'}}")
            i.large.icon
                +mini_sprite name='user-shield'
            | Admin
        a#logout.ui.item(href='#') 
            i.large.icon
                +mini_sprite name='exit'
            | Sign Out