template(name='customers')
    .ui.padded.stackable.grid
        .middle.aligned.row
            .three.wide.center.aligned.column
                +link_button link='/admin' icon='user-shield' label='Admin'
            .ten.wide.column
                h1.ui.center.aligned.header
                    +icon name='customer-support'
                    | Customers
            .three.wide.right.aligned.column
                // if is_dev
                // .sync_customers.ui.icon.button(title='Refresh Customers')
                //     i.refresh.icon

        .row
            .sixteen.wide.column
                +reactiveTable settings=settings class="ui celled striped sortable table"


template(name='customer_view')
    .ui.padded.stackable.grid
        .centered.middle.aligned.row
            .three.wide.center.aligned.column
                +link_button link='/customers' icon='customer-support' label='Customers'
            .ten.wide.column
                h1.ui.center.aligned.grey.header ##{jpid} #{cust_name} Customer
            .three.wide.right.aligned.column
                +edit_button
        // unless is_customer
        .centered.row
            .twelve.wide.column
                .ui.secondary.segment
                    // h4.ui.header Name: #{cust_name}
                    // h4.ui.header Master Licensee: #{master_licensee}
                    // h4.ui.header Contact Person: #{customer_contact_person}
                    // h4.ui.header Contact Email: #{customer_contact_email}
                    // h4.ui.header Tel: #{telephone}
                    // h4.ui.header Franchisee: #{franchisee}
                    with ev
                        .ui.header #{CUST_NAME}
                        div Master Licensee
                            strong #{MASTER_LICENSEE}
                        div JPID
                            strong #{ID}
                        div Customer Contact Person
                            strong #{CUST_CONT_PERSON}
                        div Customer Contact Email
                            strong #{CUST_CONTACT_EMAIL}
                        div Tel
                            strong #{TELEPHONE}
                        div Address
                            strong #{ADDR_STREET} #{ADDR_STREET_2} #{ADDR_CITY} #{ADDR_STATE}
                        div Franchisee
                            strong #{FRANCHISEE}
                        div Number of Days of Service
                            strong #{CUST_NUM_DAYS_SERVICE}
                        div Days Service
                            strong #{CUST_DAYS_SERVICE}
                        div Regular Service Amount
                            strong #{CUST_REG_SERVICE_AMT}
        if ev.FRANCHISEE
            .centered.row
                .fifteen.wide.column
                    +customers_franchisee

                
                
                
template(name='franchisee_customers')
    +reactiveTable settings=settings collection=franchisee_customers_docs class="ui celled striped sortable table"


template(name='customers_franchisee')    
    with customers_franchisee_doc
        .ui.secondary.segment
            .ui.header 
                |#{ev.CUST_NAME}'s Franchisee
            .ui.list
                .item ID
                    strong #{jpid}
                    // strong #{ev.ID}
                .item Name
                    strong #{franchisee}
                .item 
                    #{franchisee_email}
                // .item Cell:
                //     strong #{ev.TELE_CELL}
                .item 
                    +view_button
                
                
                
template(name='my_customer_account_card')
    .ui.card
        with currentUser.users_customer
            .content
                a.ui.header(href="/view/#{_id}")
                    +icon name='customer-support'
                    |Customer Account
            .content
                a(href="/view/#{_id}")
                    h4.ui.header #{ev.CUST_NAME}
            .content
                .ui.list
                    .item ##{ev.ID}
                    .item #{ev.CUST_CONT_PERSON}
                    .item #{ev.CUST_CONTACT_EMAIL}
                    .item #{ev.TELEPHONE}
                    .item #{ev.ADDR_STREET}
                    .item #{ev.ADDR_STREET_2}
                    .item #{ev.ADDR_CITY} #{ev.ADDR_STATE}
            // .content
            //     div Franchisee
            //         strong #{ev.FRANCHISEE}
            //     div Office
            //         strong #{ev.MASTER_LICENSEE}

template(name='my_office_card')
    .ui.card
        with my_office
            .content
                a(href="/view/#{_id}")
                    .ui.header 
                        +icon name='building'
                        |Office
            .content
                a(href="/view/#{_id}")
                    h4.ui.header #{ev.MASTER_LICENSEE}
            .content
                div #{ev.ADDR_STREET} #{ev.ADDR_STREET_2} 
                div #{ev.ADDR_CITY} #{ev.ADDR_STATE} 
                div #{ev.ADDR_POSTAL_CODE} #{ev.MASTER_COUNTRY}
            .content
                a(href="tel:#{ev.TELEPHONE}") #{ev.TELEPHONE}
        
template(name='my_franchisee_card')
    .ui.card
        with currentUser.users_customer.parent_franchisee
            .content
                a(href="/view/#{_id}")
                    .ui.header 
                        +icon name='conference'
                        |Franchisee
            .content
                a(href="/view/#{_id}")
                    h4.ui.header #{franchisee}
                .ui.list
                    .item(title='Short Name') #{ev.FRANCH_NAME}
                    .item(title='Call Number')
                        a(href="tel:#{ev.TELE_CELL}") #{ev.TELE_CELL}
                    .item #{franchisee_email}
                