template(name='delta_card')
    with local_doc
        unless full_mode
            .ui.card.delta_card(class=delta_card_class)
                // .content
                //     if icon
                //         i.large.icon
                //             +icon name=icon
                //     strong #{title}

                .content
                    each blocks
                        .card
                            if local_doc.template
                                +Template.dynamic template=local_doc.template data=local_doc
                            else
                                .content
                                    if icon
                                        i.icon
                                            +icon name=icon
                                    strong #{title}
                                    |&nbsp;
                                    if is_array
                                        each value
                                            .ui.basic.label #{this}
                                    else
                                        | #{value}

                .content
                    .ui.large.button.toggle_full
                        | View
                        i.chevron.right.icon
                    .ui.large.icon.button.edit
                        i.blue.pencil.icon
                .content
                    each blocks
                        +Template.dynamic template=block_small_template data=local_doc
        if full_mode
            .ui.padded.stackable.grid
                .row
                    if delta.editing
                        .three.wide.column
                            .ui.big.button.save
                                i.green.checkmark.icon
                                | Save
                        .ten.wide.center.aligned.column
                            .ui.header
                                i.pencil.icon
                                |Edit '#{detail_doc.title}' #{current_type.title}
                        .right.floated.three.wide.column
                            .ui.button.remove_doc
                                i.red.remove.icon
                                |Delete
                            .ui.button.archive
                                i.archive.icon
                                |Archive
                    else
                        .three.wide.column
                            .ui.large.button.toggle_full
                                i.caret.left.large.icon
                                // +icon name=current_type.icon classes='spaced mini'
                                | #{current_type.plural}
                        .ten.wide.center.aligned.column
                            .ui.header
                                |'#{local_doc.title}' #{current_type.title}
                        .right.floated.three.wide.column
                            .ui.large.button.edit
                                i.blue.pencil.icon
                                | Edit
                .row
                    .ui.stackable.four.cards
                        // each blocks
                        //     .card
                        //         .content
                        //             if icon
                        //                 i.large.icon
                        //                     +icon name=icon
                        //             strong #{title}
                        unless delta.editing
                            each blocks
                                .card
                                    .content
                                        +Template.dynamic template=block_big_template data=local_doc
                                        // if template
                                        //     +Template.dynamic template=local_doc.template data=local_doc
                                        // else
                                    .content
                                        if icon
                                            i.large.icon
                                                +icon name=icon
                                        strong #{title}
                                        |&nbsp;
                                        if is_array
                                            each value
                                                .ui.basic.label #{this}
                                        else
                                            | #{value}
                        if delta.editing
                            .ui.stackable.four.cards
                                each edit_blocks
                                    .card
                                        .content
                                            +block_edit

                                            // .ui.hidden.divider
