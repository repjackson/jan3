template(name='nav')
    .ui.inverted.blue.top.attached.borderless.menu
        a.toggle_left_sidebar.icon.item 
            i.large.bars.icon
        if is_customer
            a.item(href='/')
                // img.ui.tiny.compact.inline.image(src='https://jan-pro.com/wp-content/themes/underboot/img/jan-pro-white.svg')
                i.large.icon
                    +iconsmall name='dashboard'
                | &nbsp; Dashboard
            a.mobile.hidden.item(href='/customer_incidents')
                i.large.icon
                    +iconsmall name='error'
                | &nbsp; My Incidents
            a.mobile.hidden.item(href='/store')
                i.large.icon
                    +iconsmall name='small-business'
                | &nbsp; Consumables
            a.mobile.hidden.item(href='/services')
                i.large.icon
                    +iconsmall name='broom'
                | Services
        if is_office
            // with currentUser.users_customer.parent_franchisee.parent_office
            if my_office
                a.item(href="/view/#{my_office._id}")
                    i.large.icon
                        +iconsmall name='link-company-parent'
                    | &nbsp; #{my_office.ev.MASTER_LICENSEE}
            // a.item(href="/office/#{my_office._id}/incidents")
            //     i.large.icon
            //         +iconsmall name='error'
            //     | &nbsp; Incidents
            // a.item(href="/office/#{my_office._id}/employees")
            //     i.large.icon
            //         +iconsmall name='groups'
            //     | &nbsp; Employees
            // a.item(href="/office/#{my_office._id}/franchisees")
            //     i.large.icon
            //         +iconsmall name='conference'
            //     | &nbsp; Franchisees
            // a.item(href="/office/#{my_office._id}/customers")
            //     i.large.icon
            //         +iconsmall name='customer-support'
            //     | &nbsp; Customers
            // a.item(href="/office/#{my_office._id}/settings")
            //     i.large.icon
            //         +iconsmall name='settings'
            //     | &nbsp; Settings
        if is_admin
            a.mobile.hidden.item(href='/incidents')
                i.large.icon
                    +iconsmall name='error'
                | &nbsp; Incidents
            a.mobile.hidden.item(href='/users')
                i.large.icon
                    +iconsmall name='groups'
                | &nbsp; Users
            a.mobile.hidden.item(href='/offices')
                i.large.icon
                    +iconsmall name='link-company-parent'
                | Offices
            a.mobile.hidden.item(href='/franchisees')
                i.large.icon
                    +iconsmall name='collaborator-female'
                | Franchisees
            a.mobile.hidden.item(href='/customers')
                i.large.icon
                    +iconsmall name='customer-support'
                | Customers
            a.mobile.hidden.item(href='/services')
                i.large.icon
                    +iconsmall name='broom'
                | Services
        .right.menu
            if is_admin
                a.item(href='/admin')
                    i.large.icon
                        +icon name='user-shield'
                    | &nbsp; Admin
            if currentUser
                // a.item(href='/feed')
                //     i.large.icon
                //         +icon name='appointment-reminders'
                // a.item(href='/mail')
                //     i.large.icon
                //         +icon name='topic'
                // a.item(href='/transactions')
                //     i.large.icon
                //         +icon name='data-in-both-directions'
                // a.item(href='/cart')
                //     i.large.icon
                //         +icon name='shopping-cart'
                a.item(href="/user/#{currentUser.username}" title='View Profile')
                    if currentUser.profile.image_id
                        img.ui.avatar.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
                    else
                        i.user.icon
                    | #{currentUser.username}
                a#logout.ui.icon.item(href='#' title='Log Out') 
                    i.icon
                        i.sign.out.icon
            else
                a.ui.item(href='/login')
                    i.large.icon
                        +iconsmall name='enter-2'
                    // i.sign.in.alternate.icon
                    | &nbsp; Log In



template(name='left_sidebar')
    .ui.left.vertical.sidebar.inverted.blue.thin.menu
        if currentUser
            a.toggle_left_sidebar.header.item(href="/user/#{currentUser.username}")
                img.ui.avatar.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}")
                |#{currentUser.username}
    
        a.header.toggle_left_sidebar.item(href='/') 
            |Dashboard
            i.home.icon
        // a.toggle_left_sidebar.item(href='/front')
        //     i.globe.icon
        //     | Sales Page
        a.toggle_left_sidebar.item(href='/users') 
            i.users.icon
            |Users
        a.toggle_left_sidebar.item(href='/incidents') 
            i.exclamation.icon
            |Incidents
        a.toggle_left_sidebar.item(href='/offices') 
            i.building.icon
            |Offices
        // a.toggle_left_sidebar.item(href='/schedule')
        //     | Schedule
        a.toggle_left_sidebar.item(href='/services')
            i.clock.icon
            // +tiny_sprite name='duster'
            | Services
        a.toggle_left_sidebar.item(href='/special_services')
            i.paint.brush.icon
            // +tiny_sprite name='duster'
            | Special Services
        a.toggle_left_sidebar.item(href='/franchisees') 
            i.street.view.icon
            |Franchisees
        a.toggle_left_sidebar.item(href='/customers') 
            i.money.icon
            |Customers
        if is_admin
            .divider
            a.toggle_left_sidebar.item(href='/admin') 
                i.user.shield.icon
                |Admin
            a.toggle_left_sidebar.item(href='/feed') 
                i.rss.icon
                |Feed
            .ui.divider
            a.toggle_left_sidebar.item(href='/roles') 
                i.rules.icon
                |Roles
            a.toggle_left_sidebar.item(href='/rules') SLA Rules
    
                // a.icon.item(href='/dashboard')
                //     i.line.chart.icon
            a.toggle_left_sidebar.item(href='/store')
                i.shopping.cart.icon
                | Store
            a.toggle_left_sidebar.item(href='/feedback_responses')
                i.chat.icon
                | Feedback Responses
            
        // a.icon.toggle_left_sidebar.item(href='/admin')
        //     i.shield.icon
        //     | Admin
            // a.toggle_sidebar.item(href="/profile/edit/#{currentUser._id}")
            //     if currentUser.profile.first_name
            //         | #{currentUser.profile.first_name}
            //     else
            //         | #{currentUser.username}
            //     if currentUser.profile.image_id
            //         img.ui.avatar.image(src="{{c.url currentUser.profile.image_id width=50 height=50 gravity='face' crop='fill'}}" )
            //     else
            //         i.user.icon
            // a#logout.ui.toggle_sidebar.item(href='#') 
            //     i.icon
            //         +mini_sprite name='edit'
            //     | Sign Out
        if currentUser
            a#logout.ui.item(href='#') 
                | Sign Out
                i.right.chevron.icon
        else
            a.ui.toggle_sidebar.item(href='/login') 
                // i.icon
                //     +mini_sprite name='enter'
                | Log In
