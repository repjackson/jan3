template(name='services')
    .ui.stackable.centered.padded.grid
        .row
            .ui.large.center.aligned.header
                +icon name='shopping-cart'
                | #{currentUser.users_office.ev.MASTER_LICENSEE} Services
        .row
            // .four.wide.column
            //     .ui.secondary.segment
            //         .ui.header
            //             +icon name='leaderboard'
            //             | Most Popular
            //         .ui.list
            //             each top_requested
            //                 .item
            //                     if image_id
            //                         img.ui.avatar.image(src="{{c.url image_id height=100 width=100 crop='scale'}}")
            //                     if icon
            //                         +icon name=icon
            //                     |#{title} #{request_count}
            //     .ui.secondary.segment
            //         .ui.header
            //             +icon name='headset'
            //             | Most Requesting Customer
            //     .ui.secondary.segment
            //         .ui.header
            //             +icon name='business'
            //             | Most Requested Franchisee
            //     .ui.secondary.segment
            //         .ui.header
            //             +icon name='building'
            //             | Most Requested Office
            .twelve.wide.column
                .ui.centered.three.cards
                    each services_offered
                        +service_card

template(name='service_card')
    .ui.card
        .content
            .header
                |#{title}
            if is_admin
                .meta #{slug}
            .description
                p #{description}
        .content
            .request_service.ui.button
                i.large.icon
                    +iconsmall name='service-bell'
                | Request

template(name='service_view')
    .ui.padded.stackable.grid
        .centered.middle.aligned.row
            .three.wide.column
            .ten.wide.column
                h1.ui.center.aligned.grey.header
                    if icon
                        +icon name=icon
                    |'#{title}' Service
            .three.wide.right.aligned.column
                if is_office
                    +edit_button
        .centered.row
            .four.wide.column
                .ui.secondary.segment
                    img.ui.image.inline.item(src="{{c.url image_id width=200 height=200 gravity='face' crop='fill'}}")
                // .ui.header Price: $#{price}
            .eight.wide.column
                .ui.secondary.segment
                    .large130 #{description}
                    .ui.hidden.divider
                    +request_service_button
            .four.wide.column


template(name='service_child_requests')
    .ui.secondary.segment
        .ui.header
            +icon name='service-bell'
            |Requests
        each child_requests
            .ui.secondary.segment
                .content
                    .meta.right.floated
                        +author_info
                    .header #{service_title}
                    .meta #{service_date}
                .content
                    .meta Requested #{when}
                    .large130 #{request_details}
                .content
                    +view_button
            .ui.hidden.divider

template(name='service_edit')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.center.aligned.column
                #delete.ui.icon.button
                    i.trash.icon
            .ten.wide.column
                h1.ui.center.aligned.grey.header Edit '#{title}' Service
            .three.wide.center.aligned.column
                +save_button
        .centered.row
            .ten.wide.column
                .ui.form
                    +edit_text_field key='title' label='Title'
                    +edit_text_field key='icon' label='Icon'
                    if icon
                        +icon name=icon
                    +edit_text_field key='slug' label='Slug' icon='code'
                    // +edit_number_field key='price' label='Price' icon='money'
                    +edit_image_field
                    +edit_textarea key='description' label='Description' icon='details'


template(name='service_request_view')
    .ui.padded.stackable.grid
        .centered.middle.aligned.row
            .three.wide.center.aligned.column
                unless is_customer
                    +link_button link='/p/services' icon='building' label='Services'
            .ten.wide.column
                h1.ui.center.aligned.grey.header Service Request for #{service_title}
            .three.wide.center.aligned.column
                +edit_button
        .row
            .sixteen.wide.column
                .ui.secondary.segment
                    // .ui.header Date: #{request_date}
                    .ui.header Details: #{request_details}

template(name='service_request_edit')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.center.aligned.column
                #delete.ui.icon.button
                    i.trash.icon
            .ten.wide.column
                h1.ui.center.aligned.header Service Request for #{service_title}
            .three.wide.center.aligned.column
                if submitted
                    .ui.disabled.button Submitted #{submit_date}
                    +save_button
                else
                    #submit_request.ui.jpgreen.inverted.button Submit
        .centered.row
            .ten.wide.column
                .ui.form
                    // +edit_date_field key='request_date' label='Request Date' icon='calendar'
                    +edit_textarea key='request_details' label='Request Details' icon='details'

