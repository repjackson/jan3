template(name='nav')
    .mobile.hidden
        .ui.top.fixed.inverted.blue.large.menu
            a.new_nav.icon.item(href='#')
                // i.fas.fa-menu(style="color:white;")
                // i.fas.fa-bars.fa-lg(style="color:white;")
                img.ui.small.spaced.image(src='https://jan-pro.com/wp-content/themes/underboot/img/jan-pro-white.svg')
                // +icon name='menu' classes='spaced centered mini'
            a.mobile.hidden.toggle_topbar.icon.item(href='#')
                +iconlarge name='bookmark'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='users'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='dollar-sign'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='calendar'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='tasks'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='shopping-cart'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='mailbox-with-letter'
            a.mobile.hidden.toggle_topbar.item(href='#')
                +iconlarge name='appointment-reminders'
            .right.menu
                a.toggle_rightbar.item(href='#')
                    if currentUser.image_id
                        img.ui.mini.centered.image(src="{{c.url currentUser.image_id width=50 height=50 gravity='face' crop='fill'}}")
                    else
                        +iconlarge name='user'
                    |#{currentUser.username}
        if delta.view_topbar
            +topbar
    .mobile.only
        .ui.padded.grid.top.fixed.blue.topnav.menu
            if currentUser
                .centered.nav_bar.row
                    .eight.twelve.wide.column.pointer.toggle_leftbar.item
                        img.ui.small.centered.image(src='https://jan-pro.com/wp-content/themes/underboot/img/jan-pro-white.svg')
                    .four.wide.column.toggle_rightbar.pointer.item
                        if currentUser.image_id
                            img.ui.mini.centered.image(src="{{c.url currentUser.image_id width=50 height=50 gravity='face' crop='fill'}}")
                        else
                            +icon name='gender-neutral-user'


template(name='topbar')
    .ui.grid.alphablue.top.fixed.topbar
        .four.wide.column
            +notifications
        .four.wide.column
            +messages
        .four.wide.column
            +tasks
        .four.wide.column
            +bookmarks

template(name='bottombar')
    .ui.bottom.push.alphablue.bottombar
        .ui.padded.grid
            .row
                .four.wide.column
                    if is_eric
                        +role_switcher
                .four.wide.column
                    .ui.inverted.blue.segment
                        .ui.header
                            +icon name='chat' classes='inline mini'
                            | Chat
                        .ui.inverted.list
                            each chat_messages
                                .item
                                    .content
                                        .ui.small.header #{message}
                                        small #{author_username} #{when}
                    .ui.transparent.inverted.input
                        input#new_chat(type='text' placeholder='add...')
                .four.wide.column
                    .ui.small.inverted.header
                        +iconsmall name='connected' classes='spaced'
                        | Online Users
                    each online_users
                        .ui.inverted.header #{username}
                    // unless is_admin
                    //     .ui.card
                    //         .content
                    //             +office_big office_jpid=currentUser.office_jpid

                .four.wide.column
                    +tasks


template(name='leftbar')
    if delta.view_leftbar
        .four.wide.blue.column
            .ui.vertical.blue.inverted.large.fluid.menu
                each bookmarks
                    a.item.pick_delta.toggle_leftbar(href='#' title=title)
                        | #{plural}
                        +icon name=icon

template(name='dash')
    .sixteen.wide.blue.column.topnav
        .ui.equal.width.grid
            each bookmarks
                .four.wide.column
                    .ui.inverted.blue.secondary.segment.pick_delta
                        a.ui.header(href='#')
                            +icon name=icon
                            |#{plural}
                        // .ui.basic.segment
                        //     |#{details}


template(name='rightbar')
    if delta.view_rightbar
        .four.wide.column.alphablue
            .ui.right.vertical.inverted.blue.big.menu
                a.item(href='#')
                    .ui.inverted.header
                        | #{currentUser.first_name} #{currentUser.last_name}
                        small @#{currentUser.username}
                a.item.profile(href='#')
                    i.large.icon
                        +icon name='contacts'
                    | Profile
                a.item.settings(href='#')
                    i.large.icon
                        +icon name='settings'
                    | Settings
                a.item.sla(href='#')
                    i.large.icon
                        +icon name='workflow'
                    | SLA Settings
                a.item(href='#')
                    .ui.compact.icon.button.delete_delta(title='Clear Session')
                        i.remove.icon
                        |Reset Session
                    .ui.compact.icon.button.run_fo(title='Reload Session')
                        i.refresh.icon
                        // |Reset
                    if is_dev
                        .ui.large.icon.compact.button.show_delta
                            i.code.icon
                .item
                    +quick_idea
                a#logout.item(href='#')
                    // +icon name='exit'
                    if signing_out
                        i.notched.circle.loading.icon
                    else
                        i.large.icon
                            +icon name='exit' classes='mini'
                    | Log Out



template(name='quick_idea')
    .ui.inverted.left.icon.large.transparent.input
        +icon name='lightbulb'
        input#idea_text(placeholder='Add thought...')
        // .ui.small.fluid.icon.button.submit_idea
        //     i.checkmark.icon


template(name='notifications')
    a.ui.inverted.header.set_notifications(href='#')
        +icon name='bell'
        | Notifications

template(name='messages')
    a.ui.inverted.header.set_messages(href='#')
        +icon name='mail-bulk'
        | Messages

    // +iconsmall name='compose' title='Compose' classes='pointer'


template(name='tasks')
    a.ui.inverted.header.set_tasks(href='#')
        +icon name='tasks'
        | Tasks
    .ui.inverted.link.list
        each todos
            a.item.todo(class=item_class) #{title}


template(name='bookmarks')
    a.ui.inverted.header.set_bookmarks(href='#')
        +icon name='bookmark'
        | Bookmarks
