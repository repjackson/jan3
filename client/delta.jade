template(name='delta')
    .ui.stackable.padded.grid
        if currentUser
            unless delta
                .row
                    .sixteen.wide.column
                        if currentUser
                            .create_delta.ui.button(title='Create Session')
                                i.green.plus.icon
                                | Session
            if delta
                // .row
                //     .sixteen.wide.column
                //         .ui.breadcrumb
                //             a.section Home
                //             i.right.chevron.icon.divider
                //             a.section Registration
                //             i.right.arrow.icon.divider
                //             .active.section Personal Information
                .row
                    if delta.viewing_delta
                        unless delta.viewing_detail
                            .four.wide.column.scrolling_small
                                .ui.large.center.aligned.header
                                    if current_type.icon
                                        +icon name=current_type.icon classes='spaced large'
                                    if current_type.plural
                                        | #{current_type.plural}
                                    else
                                        | #{current_type.title}
                                if is_dev
                                    +toggle_delta_config key='config_mode' title='Schema Configuration' label='Configure' icon='settings'
                                if can_add
                                    .ui.fluid.large.button.add_doc
                                        i.green.plus.icon
                                        | #{current_type.title}

                                each faceted_blocks
                                    +facet
                    // unless delta.viewing_leftbar
                    //     unless delta.viewing_detail
                    //         unless delta.viewing_rightbar
                    //             unless delta.viewing_page
                    .center_column(class=center_column_class)
                        if delta.viewing_page
                            +Template.dynamic template=delta.page_template
                        else
                            +delta_results


template(name='toggle_delta_config')
    div
    if boolean_true
        .ui.blue.active.fluid.button.disable_key
            +iconsmall name=icon classes='inline'
            | #{label}
    else
        .ui.fluid.button.enable_key
            +iconsmall name=icon classes='inline'
            | #{label}
    p



template(name='set_page_size')
    .ui.icon.button.set_page_size(class=page_size_class title='Page Size')
        .middle.aligned #{value}

template(name='set_delta_key')
    .ui.button.set_delta_key(class=set_delta_key_class)
        |#{label}

template(name='facet')
    p
    if values
        .ui.large.accordion
            .active.title
                .ui.header
                    if icon
                        +icon name=icon classes='inline mini'
                    |#{title}
            .active.content
                // .ui.equal.width.grid.facet_class
                each values
                    +selector

template(name='selector')
    if name
        .ui.margined.toggle_value.button(class=toggle_value_class)
            | #{name}
            // small #{count}
    else
        // .column.toggle_value.pointer(class=toggle_value_class)
        .ui.margined.toggle_value.button(class=toggle_value_class)
            | [none]
            // small #{count}



