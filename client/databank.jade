template(name='databank')
    .ui.stackable.padded.grid
        .middle.aligned.row 
            .three.wide.center.aligned.column
            .ten.wide.column
                h1.ui.center.aligned.header 
                    +icon name='realtime-protection'
                    | databank
            .three.wide.center.aligned.column
                +add_button type='item'
        .row 
            .four.wide.column
                +tag_facet
                +timestamp_facet
                
                +username_facet
                .ui.header Total
                    +view_stat doc_type='item' stat_type='total' 
                .ui.header Complete #{complete_item_count}
                .ui.header Incomplete #{incomplete_item_count}
                .ui.indicating.progress
                    .bar
                    .label Completion
            .twelve.wide.column
                each databank
                    +item_segment

template(name='item_segment')
    .ui.segment
        h5.ui.header
            a(href="/view/#{_id}")
                if complete
                    i.green.checkmark.icon
                |#{title} 
        div
        |!{html}
        each tags
            .ui.small.label(class=tag_class) #{this}
        div
        |created by 
        +author_info 
        |#{when} {{ long_format timestamp }}
        div
        +mark_doc_complete_button
        +vote_up_button
        +edit_button
        +view_button
        
        
        
template(name='item_edit')
    .ui.padded.stackable.centered.grid
        .centered.row
            .three.wide.center.aligned.column
                #delete.ui.icon.button
                    i.trash.icon
            .ten.wide.column
                h1.ui.center.aligned.grey.header Edit item
            .three.wide.center.aligned.column
                +save_button
        .eight.wide.column
            .ui.form
                +edit_text_field key='title' label='title'
                +edit_array_field label='Tags' key='tags'
                +edit_html
        .four.wide.column
            +edit_author
    
        
template(name='item_view')
    .ui.padded.stackable.centered.grid
        .centered.middle.aligned.row
            .three.wide.center.aligned.column
                a.ui.button(href="/databank")
                    i.left.chevron.icon
                    | databank
            .ten.wide.column
                h1.ui.center.aligned.grey.header View item
            .three.wide.center.aligned.column
                +edit_button
        .row
            .four.wide.column
                if assigned_to_user
                    .ui.header Assigned To
                    with assigned_to_user
                        if profile.image_id
                            img.ui.avatar.spaced.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                        |&nbsp;
                        a(href="/user/#{username}") #{username} 
            .eight.wide.column
                .ui.header #{title}
                |!{html}
                +comments
                +full_doc_history
            .four.wide.column
                |created by 
                +author_info 
                div #{when} {{ long_format timestamp }}
                .ui.header 
                    i.tags.icon
                    |Tags
                each tags
                    .ui.label #{this}
                    


