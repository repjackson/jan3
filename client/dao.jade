template(name='dao')
    .ui.stackable.grid
        .four.wide.column
            .ui.secondary.segment
                .ui.small.header facets
                .ui.list
                    each facets
                        .item
                            a(href="/p/dao?doc_id=#{_id}") #{_id}
            if facet_doc
                with facet_doc
                    .ui.list
                        .item id: #{_id}
                        .item count: #{count}
                        .item
                            .ui.icon.button.clear_results
                                i.remove.icon
                    // each facet_filters
                    +facet key='customer_name'
                    .ui.small.dividing.header
                        |Ticket Types
                    each ticket_types
                        +set_facet_key key='ticket_type' value=slug label=title
                    .ui.list
                        each args
                            .item
                                |#{key}: #{value}
                                i.remove_arg.remove.link.icon
                    .ui.form
                        .inline.field
                            label new key
                            input.arg_key(type='text')
                        .inline.field
                            label new value
                            input.arg_value(type='text')
                        .ui.divider
            else
                .create_facet.ui.button
                    |Create Facet

            .call.ui.button
                |call
        .twelve.wide.column
            .ui.stackable.cards
                each facet_doc.docs
                    +facet_card


template(name='set_facet_key')
    .ui.button.small.compact.set_facet_key(class=set_facet_key_class)
        |#{label}


template(name='facet')
    |key: #{key}
    .recalc.ui.button
        |Recalc #{label}
    each values
        .ui.small.compact.button
            |#{label}